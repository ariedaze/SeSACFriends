## daily scrum

|                   | 월   | 화                                                           | 수                                                        | 목   | 금   | 토   | 일   |
| ----------------- | ---- | ------------------------------------------------------------ | --------------------------------------------------------- | ---- | ---- | ---- | ---- |
| 어제 한 일        |      | 맵 뷰 넣기<br>여종님 블로그 정독 <br/>마늘맨님 블로그 정독<br/> RxCoreLocation 적용 <br/>커스텀어노테이션 적용<br/> 치타핏 업데이트 2번 | - [ ] 성별 필터<br/>- [ ] 위치 권한 상태 처리 <br/>       |      |      |      |      |
| 예정된 할 일 목록 |      | - [ ] 성별 필터<br>- [ ] 위치 권한 상태 처리 <br>            | - [ ] 주변 새싹 탐색 <br/>- [ ] 지도 뷰 축적, interaction |      |      |      |      |
| 기타              |      |                                                              |                                                           |      |      |      |      |



## ✐ checklist

**홈화면**

- [ ] ui

  - [x] 다른 사용자들의 새싹핀 이미지: (post, queue/onqueue)의 sesac에 해당
  - [x] 중앙 고정 핀: 새싹 찾기를 할 때 사용할 기준 위치
  - [ ] 성별 필터 버튼:  (post, queue/onqueue)의 gender에 해당
  - [ ] gps 버튼: 현재 위치, 위치 권한 없다면 alert 띄우기
  - [x] 플로팅버튼: 일반 상태 / 대기중 상태 / 매칭된 상태
  - [ ] 주변 새싹 탐색 기능:
    - [ ] Gps 버튼 클릭 시
    - [ ] Corelocation 메서드를 통해 위치가 업데이트 될 때
    - [ ] 위치 권한이 변경될 때
    - [ ] 성별 필터 버튼을 클릭할 때
    - [x] 사용자가 맵을 움직일 때(이동, 확대, 축소 등)
    - [ ] 다른 화면에서 홈 화면으로 전환되었을 때
- [ ] 홈 화면 보일 때 마다
  - [x] 사용자 현재 상태를 확인하고, 플로팅 버튼을 설정한다.
  - [ ] 사용자 현재 위치를 확인하고, 지도의 중심을 설정한다.
    - [ ] 위치 권한이 없으면 영등포 캠퍼스를 기준으로 설정한다.

  - [x] (POST, /queue/onqueue)로 사용자의 위치를 보내고, 응답값을 통해 다른 사용자들(매칭 대기중 상태)를 지도에 새싹핀으로 표시

- [ ] 사용자 현재 상태 확인
  - [ ] UserDefaults에 저장된 사용자의 현재 상태를 통해 UI를 업데이트 합니다.
  - [ ] 🧐 **Point**  
    - [ ] 어떤 로직에서 사용자의 현재 상태가 변경될까요? Ex 새싹 찾기 버튼 클릭, 찾기 중단 클릭, 매칭 후 약속 취소

- [ ] FCM 토큰 갱신
  - [ ] 클라이언트에서 가지고 있는 FCM 토큰과 서버에서 가지고 있는 토근 비교, 다른 경우 (PUT, /user/update_fcm_token)로 업데이트
  - [ ] 🧐 **Point**  
    - [ ] 새 기기에서 앱 복원, 사용자가 앱 삭제/재설치, 사용자가 앱 데이터 소거를 제외하고 등록 토큰이 변경되지 않는다. 그럼 FCM토큰 갱신이 언제, 왜 필요할까요? - 홈화면 진입할 때

- [ ] 성별 필터 버튼
  - [ ] gender: 여자0 남자1 전체는 전체

- [ ] 지도뷰
  - [x] Default: 중앙 핀 기준 반지름이 700m인 원이 보이도록 축적 설정, 세로는 자유롭게
    - [x] 지도 축소/확대 비율: 반지름 3km 축소, 반지름 50m 확대

  - [x] 지도 Interaction(option)
    - [x] 사용자가 제스처를 통해 이리저리 이동하면 서버 요청이 어려워짐
    - [ ] 사용자가 제스처를 통해 맵을 움직이고 난 시점부터 0.8초 동안은 지도의 인터랙션을 금지한다. 움직인 직후 0.8초가 지나면 다시 지도를 이동하거나 확대, 축소할 수 있습니다.

- [x] 위치 권한 확인
  - [ ] 거부상태
    - [ ] 중심 영등포캠퍼스: 위도(37.517819364682694), 경도(126.88647317074734)
    - [ ] gps 버튼 클릭, 일반 상태에서 플로팅 버튼 클릭 시 "위치 서비스 사용 불가" 얼럿을 띄우고 아이폰 전체 설정으로 이동한다.

- [ ] 플로팅 버튼 클릭 시
  - [ ] 일반 상태
    - [ ] 위치 권한 허용된 상태 + 성별 설정 상태 > 취미 입력 화면(1-2)으로 전환
      - [ ] 성별 -1인 경우 "새싹 찾기 기능을 이용하기 위해서는 성별이 필요해요!" 토스트 띄우고 정보 관리 화면으로 전환

  - [ ] 매칭 대기중 상태
    - [ ] 새싹 찾기 화면(1-3)으로 전환

  - [ ] 매칭된 상태
    - [ ] 채팅 화면으로 전환

- [x] **(POST, /queue/onqueue) 에 대한 요청 바디 정보** 
  - [x] region: (위도+90 후 소수점 제거)[:5] + (경도+180 후 소수점 제거)[:5] 총 10자리 전송
  - [x] 위도
  - [x] 경도



**취미 입력 화면**

